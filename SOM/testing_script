#
#
# Script to test MY knowledge about variables!
#

#Variables
RED='\033[0;31m'
NC='\033[0m'
GREEN='\033[0;32m'
i=1

#Preconditions
if [ "$#" -ne 2 ]; then
    echo -e "${RED}ERROR:${NC} You must enter the map configuration x and y neurons"
    exit 1
fi
if [ -d "./Pruebas/Prueba-$1-$2" ]; then
    echo `rm -rf ./Pruebas/Prueba-$1-$2`
fi

#LVQ Calculation
echo -e "Starting the code exection ...\n"
#crea carpeta de pruebas
echo `mkdir ./Pruebas/Prueba-$1-$2`
for j in {1..3}
do
    echo `mkdir ./Pruebas/Prueba-$1-$2/Fold$j`
    echo -e "${GREEN}Set of commmands x:$1 y:$2 #:$j:\n${NC}"
    echo `./som_pak-3.1/randinit -din Train$j.txt -cout Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod -xdim $1 -ydim $2 -topol hexa -neigh bubble`
    echo `./som_pak-3.1/vsom -din Train$j.txt -cin Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod -cout Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod -rlen 1000 -alpha 0.05 -radius 10`
    echo `./som_pak-3.1/vsom -din Train$j.txt -cin Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod -cout Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod -rlen 10000 -alpha 0.02 -radius 3`
    echo `./som_pak-3.1/qerror -din Train$j.txt -cin Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod > Pruebas/Prueba-$1-$2/Fold$j/qerror-$j.txt`
    echo `./som_pak-3.1/vcal -din Train$j.txt -cin Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod -cout Pruebas/Prueba-$1-$2/Fold$j/diabetesCal-$j.cod`
    echo `./som_pak-3.1/visual -din Test$j.txt -cin Pruebas/Prueba-$1-$2/Fold$j/diabetesCal-$j.cod -dout Pruebas/Prueba-$1-$2/Fold$j/diabVisual-$j.txt`
    echo `./som_pak-3.1/sammon -cin Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod -cout Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.sam -rlen 100 -ps`
    echo `./som_pak-3.1/umat -cin Pruebas/Prueba-$1-$2/Fold$j/diabetes-$j.cod > Pruebas/Prueba-$1-$2/Fold$j/diab-$j.umat.ps`
done
echo "done."
exit 0
